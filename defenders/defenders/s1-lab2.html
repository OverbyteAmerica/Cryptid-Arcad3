<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Defenders Guild ‚Äî Season 1 Lab 2</title>

<style>
body {
  background: black;
  color: #00ffcc;
  font-family: monospace;
  padding: 20px;
}

.boot {
  font-size: 1.3rem;
  margin-bottom: 20px;
}

.panel {
  border: 1px solid #00ffcc;
  padding: 20px;
  margin-top: 20px;
}

.node {
  display: flex;
  justify-content: space-between;
  gap: 20px;
  margin-top: 15px;
}

.desc {
  width: 60%;
  font-size: .9rem;
  opacity: .85;
}

button {
  background: black;
  border: 1px solid #00ffcc;
  color: #00ffcc;
  padding: 10px;
  cursor: pointer;
  width: 40%;
}

button:hover { background: #002; }
.hidden { display: none; }
.log {
  background: #001;
  height: 260px;
  overflow: auto;
  padding: 10px;
  margin-top: 20px;
}
.command { font-size: .8rem; opacity: .7; margin-top: 5px; }
#cookie { position: fixed; top: 20px; right: 20px; width: 260px; border: 1px solid #00ffcc; background: #000; padding: 12px; box-shadow: 0 0 18px rgba(0,255,204,.5); font-size: .9rem; z-index: 9999; border-radius: 8px; }
#cookie::before { content: ""; position: absolute; inset: 0; background: linear-gradient(rgba(0,255,204,0.05), transparent); pointer-events: none; }
#cookie * { color: #00ffcc; }
#cookie-avatar { font-size: 1.6rem; margin-bottom: 6px; }
#cookie-text { opacity: .95; line-height: 1.4; }
</style>
</head>

<body>

<div id="boot" class="boot"></div>
<div id="lab" class="hidden">

<h2>Lab 2 ‚Äî Signal in the Noise</h2>
<div class="panel">
<p>Unusual traffic appears across multiple regions. A Defender warns Byte Bugs might already be inside. Capture packets, analyze anomalies, and detect suspicious communications to secure the network.</p>
<p><em>‚ÄúThey are already inside.‚Äù</em></p>
</div>

<div class="panel">
<h3>Node Cluster 02 ‚Äî Packet Capture</h3>

<div class="node">
<button onclick="capturePackets()">
Capture Packets
<div class="command">&lt;tcpdump -i eth0 -w capture.pcap&gt;</div>
</button>
<div class="desc">Start capturing all traffic. This is your first step to observe the network and find anomalies. Each packet could reveal hidden Byte Bug activity.</div>
</div>

<div class="node">
<button onclick="analyzePackets()">
Analyze Packets
<div class="command">&lt;wireshark capture.pcap&gt;</div>
</button>
<div class="desc">Inspect captured traffic visually. Look for unusual connections, strange protocols, or suspicious devices that indicate intrusions.</div>
</div>

<div class="node">
<button onclick="detectAnomalies()">
Detect Anomalies
<div class="command">&lt;grep "malicious" capture.pcap&gt;</div>
</button>
<div class="desc">Search for known signs of malicious behavior. This step reveals whether the Byte Bugs have infiltrated the network, connecting directly to Lab 3's first infection.</div>
</div>
</div>

<div class="panel hidden" id="complete">
<h3>Packet Monitoring Complete</h3>
<p>Lab 2 complete. The network is temporarily stabilized. Lab 3 is now available on the dashboard.</p>
<button onclick="returnDash()">Return to Dashboard</button>
</div>

<div class="log" id="log"></div>

<div id="cookie">
<div id="cookie-avatar">üêï</div>
<div id="cookie-text">...</div>
</div>

<script>
let progress = 0;

function log(msg) { const l = document.getElementById('log'); l.innerHTML += msg + '<br>'; l.scrollTop = l.scrollHeight; }
function cookie(msg) { document.getElementById('cookie-text').innerText = msg; }

setTimeout(()=>{ cookie("I‚Äôm online again. Ready to see what‚Äôs happening in the network?"); }, 2500);

function capturePackets() {
  cookie("Capturing all packets. Watch for hidden Byte Bugs.");
  log("defender@boot:~$ tcpdump -i eth0 -w capture.pcap");
  log("Capturing traffic...");
  log("Encrypted packet streams detected.");
  progress++;
  checkProgress();
}

function analyzePackets() {
  cookie("Analyzing packets to find anomalies.");
  log("defender@boot:~$ wireshark capture.pcap");
  log("Opening packets in Wireshark...");
  log("Suspicious connection from 192.168.42.7 detected.");
  progress++;
  checkProgress();
}

function detectAnomalies() {
  cookie("Searching for malicious signatures.");
  log("defender@boot:~$ grep \"malicious\" capture.pcap");
  log("Anomaly detected: corrupted message - 'They are already inside.'");
  progress++;
  checkProgress();
}

function checkProgress() {
  if(progress >= 3) {
    document.getElementById('complete').classList.remove('hidden');
    localStorage.setItem('s1lab2', 'complete');
    cookie("Good work. Lab 3 is now available on your dashboard.");
  }
}

function returnDash() { window.location.href = 'defenders-dashboard.html'; }

const text = "You don‚Äôt join the Defenders. You survive long enough to be invited.";
if(!localStorage.getItem("booted_lab2")) {
  let i = 0;
  function boot() {
    if(i < text.length) {
      document.getElementById('boot').innerHTML += text.charAt(i);
      i++;
      setTimeout(boot, 35);
    } else {
      localStorage.setItem("booted_lab2", "true");
      setTimeout(()=>{ document.getElementById('lab').classList.remove('hidden'); }, 900);
    }
  }
  boot();
} else {
  document.getElementById('lab').classList.remove('hidden');
}
</script>

</body>
</html>
