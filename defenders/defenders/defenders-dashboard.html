<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Defenders Guild ‚Äî Season 1 Dashboard</title>

<style>
body { background: black; color: #00ffcc; font-family: monospace; padding: 20px; text-align: center; }
.panel { border: 1px solid #00ffcc; padding: 20px; margin-top: 20px; display: inline-block; text-align: center; }
.node { display: inline-block; margin: 10px; padding: 20px; border: 1px solid #00ffcc; cursor: pointer; width: 100px; text-align: center; position: relative; }
.node.active { box-shadow: 0 0 12px #00ffcc; transition: 0.4s; }
#node10.boss-ready { animation: pulse 1.2s infinite; border-color: #ff00ff; }
@keyframes pulse { 0%, 100% { box-shadow: 0 0 10px #ff00ff; } 50% { box-shadow: 0 0 25px #ff00ff; } }
.log { background: #001; height: 250px; overflow: auto; padding: 10px; margin-top: 20px; display: inline-block; width: 85%; text-align: left; }
#cookie { position: fixed; top: 20px; right: 20px; width: 260px; border: 1px solid #00ffcc; background: #000; padding: 12px; box-shadow: 0 0 18px rgba(0,255,204,.5); font-size: .9rem; z-index: 9999; border-radius: 8px; }
#cookie-avatar { font-size: 1.6rem; margin-bottom: 6px; }
#cookie-text { opacity: .95; line-height: 1.4; }
</style>
</head>
<body>

<h2>Defenders Guild ‚Äî Season 1 Dashboard</h2>

<div id="networkMap" class="panel">
  <h3>Network Stability Map</h3>
  <div id="node1" class="node">Lab 1</div>
  <div id="node2" class="node">Lab 2</div>
  <div id="node3" class="node">Lab 3</div>
  <div id="node4" class="node">Lab 4</div>
  <div id="node5" class="node">Lab 5</div>
  <div id="node6" class="node">Lab 6</div>
  <div id="node7" class="node">Lab 7</div>
  <div id="node8" class="node">Lab 8</div>
  <div id="node9" class="node">Lab 9</div>
  <div id="node10" class="node">Boss Lab</div>
</div>

<div id="bugActivity" class="panel">
  <h3>Byte Bug Activity (Sonar)</h3>
  <canvas id="bugRadar" width="400" height="400"></canvas>
</div>

<div id="networkLog" class="panel log"></div>

<div id="cookie">
  <div id="cookie-avatar">üêï</div>
  <div id="cookie-text">Initializing dashboard...</div>
</div>

<script>
// Network Log
const logEl = document.getElementById('networkLog');
function log(msg) { logEl.innerHTML += msg + '<br>'; logEl.scrollTop = logEl.scrollHeight; }

// Cookie Helper
function cookie(msg) { document.getElementById('cookie-text').innerText = msg; }
setTimeout(()=>{ cookie("I‚Äôm online. Monitoring the network now."); }, 2000);

// Node Activation
function updateNodes() {
  for(let i=1;i<=9;i++) {
    if(localStorage.getItem(`s1lab${i}`)==='complete') document.getElementById(`node${i}`).classList.add('active');
  }
  if([...Array(9)].every((_, i) => localStorage.getItem(`s1lab${i+1}`)==='complete')) {
    document.getElementById('node10').classList.add('boss-ready');
    log('All labs complete. Boss Lab unlocked.');
  }
}
updateNodes();

// Node Click Navigation
for(let i=1;i<=9;i++) {
  document.getElementById(`node${i}`).addEventListener('click',()=>{ window.location.href = `s1-lab${i}.html`; });
}
document.getElementById('node10').addEventListener('click',()=>{
  if(document.getElementById('node10').classList.contains('boss-ready')) window.location.href='s1-lab10.html';
  else cookie('Boss Lab is locked. Complete all other labs first.');
});

// --- Byte Bug Sonar ---
const canvas2 = document.getElementById('bugRadar');
const ctx2 = canvas2.getContext('2d');
const width = canvas2.width;
const height = canvas2.height;
const centerX = width/2;
const centerY = height/2;
const radius = width/2 - 20;
let sweepAngle = 0;
let blips = [];

function drawRadar() {
  ctx2.clearRect(0,0,width,height);
  ctx2.strokeStyle = '#00ff33'; ctx2.lineWidth = 1;
  for(let i=1;i<=4;i++){ ctx2.beginPath(); ctx2.arc(centerX,centerY,(radius/4)*i,0,Math.PI*2); ctx2.stroke(); }
  const grad = ctx2.createRadialGradient(centerX,centerY,0,centerX,centerY,radius);
  grad.addColorStop(0,'rgba(0,255,51,0.2)');
  grad.addColorStop(1,'rgba(0,255,51,0)');
  ctx2.fillStyle = grad; ctx2.beginPath(); ctx2.moveTo(centerX,centerY);
  ctx2.arc(centerX,centerY,radius,sweepAngle-0.03,sweepAngle); ctx2.closePath(); ctx2.fill();
  blips.forEach(b => { ctx2.fillStyle = `rgba(255,0,0,${b.alpha})`; ctx2.beginPath(); ctx2.arc(b.x,b.y,5,0,Math.PI*2); ctx2.fill(); });
  sweepAngle += 0.02; if(sweepAngle > Math.PI*2) sweepAngle = 0;
  if(Math.random()>0.97){ const angle = Math.random()*Math.PI*2; const r = Math.random()*radius; blips.push({x:centerX+r*Math.cos(angle), y:centerY+r*Math.sin(angle), alpha:1}); }
  blips = blips.map(b=>({...b, alpha:b.alpha-0.02})).filter(b=>b.alpha>0);
  requestAnimationFrame(drawRadar);
}
drawRadar();

// Simulated Network Log Activity
setInterval(()=>{
  if(Math.random()>0.6) log('Ghost transmission: Unusual traffic detected.');
  if(Math.random()>0.7) log('Byte Bug scanning network nodes...');
},8000);
</script>
</body>
</html>
